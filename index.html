<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>CONTACT MANAGER</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/style.css">
</head>
<body>
    <section style="background:linear-gradient(108deg, #cff4de 0%, #eafff3 100%);" class="header">
        <nav class="navbar navbar-expand-lg navbar-light bg-light" style="background: linear-gradient(108deg, #cff4de 0%, #eafff3 100%);">
            <div class="container-fluid">
              <a class="navbar-brand" href="#">Navbar</a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                  <a class="nav-link active" aria-current="page" href="#">HOME</a>
                  <a class="nav-link" href="#">ADD CONTACT</a>
                  <a class="nav-link" href="#">DELETE CONTACT</a>
                  <a class="nav-link" href="view_contacts.html">VIEW CONTACT</a>
                </div>
              </div>
            </div>
          </nav>
    </section>
    <section class="contact-form" style=" background:linear-gradient(108deg, #cff4de 0%, #eafff3 100%);">
        <form id="contactForm" onsubmit="saveContact(); return false;">
            <div class="form-group">
              <label for="firstName">FIRST NAME</label>
              <input type="text" class="form-control" id="firstName" placeholder="Enter your first name" required>
            </div>
            <div class="form-group">
                <label for="surName">SUR NAME</label>
                <input type="text" class="form-control" id="surName" placeholder="Enter your middle name" required>
              </div>
              <div class="form-group">
                <label for="lastName">LAST NAME</label>
                <input type="text" class="form-control" id="lastName" placeholder="Enter your last name" required>
              </div>
            <div class="form-group">
              <label for="label">LABEL</label>
              <select class="form-control" id="label">
                <option>WORK</option>
                <option>HOME</option>
                <option>FAX</option>
                <option>WORK FAX</option>
                <option>PERSONAL</option>
              </select>
            </div>
            <div class="form-group">
                <label for="email">Email address</label>
                <input type="email" class="form-control" id="email" placeholder="name@example.com" required>
              </div>   
              <div class="form-group">
                <label for="dob">DATE OF BIRTH</label>
                <input type="text" class="form-control" id="dob" placeholder="Example: 03/05/2004" required>
              </div>
              <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </section>
    <script src="assets/script.js"></script>
    <script>
        function saveContact() {
            var firstName = document.getElementById('firstName').value;
            var surName = document.getElementById('surName').value;
            var lastName = document.getElementById('lastName').value;
            var label = document.getElementById('label').value;
            var email = document.getElementById('email').value;
            var dob = document.getElementById('dob').value;

            var contact = {
                "firstName": firstName,
                "surName": surName,
                "lastName": lastName,
                "label": label,
                "email": email,
                "dob": dob
            };

            // Check if contacts already exist
            var contacts = JSON.parse(localStorage.getItem('contacts')) || [];
            contacts.push(contact);

            // Save to localStorage
            localStorage.setItem('contacts', JSON.stringify(contacts));

            // Update contacts displayed on the View Contacts page
            updateViewContacts();

            // Optional: Notify the user
            alert("Contact saved successfully!");
        }

        function updateViewContacts() {
            fetch('contacts.json')
                .then(response => response.json())
                .then(data => {
                    var tableBody = document.getElementById('contactTableBody');
                    tableBody.innerHTML = '';

                    data.forEach(function(contact) {
                        var row = `<tr>
                                        <td>${contact.firstName}</td>
                                        <td>${contact.surName}</td>
                                        <td>${contact.lastName}</td>
                                        <td>${contact.label}</td>
                                        <td>${contact.email}</td>
                                        <td>${contact.dob}</td>
                                    </tr>`;
                        tableBody.innerHTML += row;
                    });
                });
        }
    </script>
</body>
</html>
